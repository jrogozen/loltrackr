var app = angular.module("loltrackrApp", ['ngResource', 'ngRoute', 'ng-rails-csrf', 'ngSanitize']);

app.config(['$routeProvider', function($routeProvider){
  $routeProvider.when("/team-builder", {
    templateUrl: "<%= asset_path('angular/templates/team-builder.html') %>",
    controller: "TeamBuilderCntrl"
  })
  .when("/videos/new", {
    templateUrl: "<%= asset_path('angular/templates/videos-new.html') %>",
    controller: "NewVideoCntrl"
  })
  .when("/videos/:id", {
    templateUrl: "<%= asset_path('angular/templates/video.html') %>",
    controller: "ViewVideoCntrl"
  })
  .when("/videos", {
    templateUrl: "<%= asset_path('angular/templates/videos.html') %>",
    controller: "VideoCntrl"
  })
  .when("/team-builder/stats", {
    templateUrl: "<%= asset_path('angular/templates/team-builder-stats.html') %>",
    controller: "TeamStatsCntrl"
  })
  .when("/team-builder/:id", {
    templateUrl: "<%= asset_path('angular/templates/team.html') %>",
    controller: "TeamViewCntrl"
  })
  .when("/search", {
    templateUrl: "<%= asset_path('angular/templates/search.html') %>",
    controller: "VideoCntrl"
  })
  .when("/streams", {
    templateUrl: "<%= asset_path('angular/templates/streams.html') %>",
    controller: "StreamCntrl"
  })
  .when("/stream/:streamer", {
    templateUrl: "<%= asset_path('angular/templates/stream.html') %>",
    controller: "ViewStreamCntrl"
  })
  // admin section
  .when("/admin", {
    templateUrl: "<%= asset_path('angular/templates/admin.html') %>",
    controller: "AdminCntrl"
  })
  .when("/", {
    templateUrl: "<%= asset_path('angular/templates/home.html') %>",
    controller: "HomeCntrl"
  })
  // .otherwise({
  //   redirectTo: "/"
  // })

}]);

app.config(['$sceDelegateProvider', function($sceDelegateProvider) { 
  $sceDelegateProvider.resourceUrlWhitelist([
    'self',
    'https://www.youtube.com/**',
    'https://www.twitch.tv/**'
  ]);
}]);